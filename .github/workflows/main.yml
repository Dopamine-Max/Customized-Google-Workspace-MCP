name: Ping Server

on:
  schedule:
    - cron: '*/13 * * * *' # Runs every 13 minutes
  workflow_dispatch: # Allows manual triggering

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping the API
        run: |
          SERVER_URL="https://agentsync-google-workspace-mcp.onrender.com/"
          
          echo "Pinging ${SERVER_URL} at $(date)"
          
          # Simple curl request - don't fail the workflow if server is down
          HTTP_CODE=$(curl -s -o /dev/null -w "%{http_code}" --max-time 30 ${SERVER_URL}) || true
          
          echo "Response: HTTP ${HTTP_CODE}"
          
          # Always succeed so the workflow keeps running on schedule
          exit 0
